---
title: 手把手教你打造智能小车（5）-使用舵机打造摄像机云台
entitle: step-by-step-building-smart-car-5
categories:
  - technology
tags:
  - 黑科技
author: 赵小生
authorAbout: 'https://github.com/zhmhhu'
avatar: /images/userpic.jpg
authorLink: 'https://github.com/zhmhhu'
authorDesc: 不会讲故事的程序员不是好的水利工程师
photos: https://ws1.sinaimg.cn/large/006tNbRwgy1fw00t0jio0j30a307s3yg.jpg
date: 2018-09-24 15:13:26
keywords:
description: 完成智能小车的制作之后，还差一项非常重要的工作，那就是摄像头。
---

## 摄像头介绍
完成智能小车的制作之后，还差一项非常重要的工作，那就是摄像头。没有摄像头的小车，跟普通的遥控玩具车没什么区别。树莓派小车的功能，远远不只是转向控制而已。
给小车安装摄像头的方式非常简单，在树莓派主板上装上摄像头就可以了。推荐树莓派的官方摄像头，它是这个样子的。

![](https://ws1.sinaimg.cn/large/006tNbRwgy1fw00t0jio0j30a307s3yg.jpg)

在关机状态下，将软排线插入到树莓派的 CAMERA 接口上，开机。运行树莓派配置工具来激活摄像头模块：
```
$ sudo raspi-config 
```
移动光标至菜单中的 "Enable Camera（启用摄像头）"，将其设为Enable（启用状态）。完成之后重启树莓派。

在重启完树莓派后，我们就可以使用Pi Cam了。要用它来拍摄照片的话，可以从命令行运行raspistill：
```
$ raspistill -o pic.jpg -t 2000 
```
这句命令将在 2000ms 后拍摄一张照片，然后保存为 pic.jpg。找到这个文件，看看拍摄效果如何。

使用普通的 USB 摄像头也可以，但前提是你能够搞的定它的驱动。

此时，摄像头只能是固定不动的。如果想要摄像头能够上下左右转动，就需要进行下面所说的改造，使用舵机打造摄像机云台。

## 舵机介绍

我们使用性价比超高的 SG90 舵机来打造摄像机云台，下面的相关数据都是针对SG90的。舵机就是可以自由指定转角的伺服马达，它有三根引出的线，红线是电源线，可以接5V输入；棕线是地线；橙线是信号线，也是我们唯一需要输入控制信号的线。在舵机内部，有一个周期20ms，脉宽1.5ms的基准脉冲，它对应于一个基准电压；为了控制舵机，我们给信号线输入一个周期也为20ms，一定占空比的控制脉冲，这个脉冲经过调制芯片的处理成为一个偏置电压，舵机内部首先通过比较偏执电压和基准电压差值的正负来进行正相或反相转动，同时舵机内部带有平衡电位器，内部齿轮转动的同时会带动电位器变化，电位器会逐渐减小电压差，当电机转到指定角度时电压差值刚好为0，舵机停止转动。所以归结起来，要控制舵机转到指定角度，就给它输入指定占空比的脉冲波。
![](https://ws3.sinaimg.cn/large/006tNbRwgy1fw00mxflmlj30jl0a3gmd.jpg)

舵机的转角范围是0-180度，舵机的控制一般需要一个20ms左右的时基脉冲，该脉冲的高电平部分一般为0.5ms~2.5ms范围内的角度控制脉冲部分。对应的控制关系是这样的：

|脉宽(ms)|占空比(%)|转角(°)|
|---|----|----|
|0.5|2.5|0|
|1.0|5|45|
|1.5|7.5|90|
|2.0|10|135|
|2.5|12.5|180|

## 舵机控制

## 双舵机打造摄像机云台